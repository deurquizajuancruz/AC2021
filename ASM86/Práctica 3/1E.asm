CONT EQU 10H
COMP EQU 11H
EOI EQU 20H
INT1 EQU 25H
PB EQU 31H
CB EQU 33H

ORG 32
IDCLK DW 3000H

ORG 1000H
PATRON DB 00000001B
       DB 00000010B
       DB 00000100B
       DB 00001000B
       DB 00010000B
       DB 00100000B
       DB 01000000B
       DB 10000000B

ORG 3000H
CMP DL,8
JZ ATRAS
MOV DH,0
INC DL
MOV AL,[BX]
OUT PB,AL
INC BX
JMP FIN
ATRAS: DEC BX
MOV AL,[BX]
OUT PB,AL
INC DH
CMP DH,8
JNZ FIN
MOV DL,0
FIN: MOV AL,0
OUT CONT,AL
MOV AL,20H
OUT EOI,AL
IRET

ORG 2000H
CLI
MOV AL,0FDH
OUT EOI+1,AL ; HABILITO LA INTERRUPCION POR TIMER
MOV AL,0
OUT CB,AL 
INC AL
OUT COMP,AL ; LE PASO 1 AL COMPARADOR
MOV AL,8
OUT INT1,AL ; PONGO EL ID DEL CLOCK
MOV AL,0
OUT CONT,AL
MOV DH,1
MOV DL,0
MOV BX,OFFSET PATRON
STI
LAZO: JMP LAZO
INT 0
END
