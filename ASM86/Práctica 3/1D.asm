CONT EQU 10H
COMP EQU 11H
EOI EQU 20H
INT1 EQU 25H
PA EQU 30H
PB EQU 31H
CA EQU 32H
CB EQU 33H

ORG 28
IPCLK DW 3000H

ORG 1000H
PATRON DB 0

ORG 3000H
INC PATRON
CMP PATRON,0FFH
JZ TERMINAR
MOV AL,PATRON
OUT PB,AL
MOV AL,0
OUT CONT,AL
JMP FIN
TERMINAR: INC DX
MOV AL,0FFH
OUT EOI+1,AL
FIN: MOV AL,20H
OUT EOI,AL
IRET

ORG 2000H
CLI
MOV AL,0FDH
OUT EOI+1,AL ; HABILITO LA INTERRUPCION POR TIMER
MOV AL,7
OUT INT1,AL ; ID DE INTERRUPCION
MOV AL,1
OUT COMP,AL ; LE PASO 1 AL COMPARADOR DEL TIMER
MOV AL,0
OUT CB,AL ; LE PASO 0 A CB
OUT PB,AL ; LE PASO 0 A PB
OUT CONT,AL ; LE PASO 0 AL CONTADOR DEL TIMER
MOV DX,0
STI
LAZO: CMP DX,1
      JNZ LAZO
INT 0
END
