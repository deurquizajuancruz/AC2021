PIC EQU 20H
PIO EQU 30H
NF10 EQU 10

ORG 40
IPF10 DW RUTF10

ORG 1000H
MSJ DB "INGRESE UN NUMERO DEL 1 AL 9: "
FIN DB ?
ORG 1100H
NUMERO DB ?

ORG 1200H
MSJNOPAR DB "EL NUMERO NO ES PAR"
FIN2 DB ?

ORG 3000H
RUTF10: MOV DX,[BX]
AND DX,1
JZ PAR
JNZ IMPAR
PAR: MOV AL,1
OUT PIO+2,AL
MOV AL,0
OUT PIO+3,AL
IN AL,PIO
AND AL,0FDH
OUT PIO,AL
POLL:IN AL,PIO
AND AL,1
JNZ POLL
MOV AL,[BX]
OUT PIO+1,AL
IN AL,PIO
OR AL,2
OUT PIO,AL
IN AL,PIO
AND AL,0FDH
OUT PIO,AL
CMP BYTE PTR [BX],38H
JZ FINAL
ADD WORD PTR [BX],2
JMP PAR
FINAL:INC CX
IRET

ORG 3500H
IMPAR: MOV BX,OFFSET MSJNOPAR
MOV AL,OFFSET FIN2 - OFFSET MSJNOPAR
INT 7
INC CX
IRET

ORG 2000H
CLI
MOV BX,OFFSET MSJ
MOV AL,OFFSET FIN - OFFSET MSJ
INT 7
MOV BX,OFFSET NUMERO
LEER:INT 6
CMP NUMERO,30H
JZ ESNUM
JS LEER
JNS PUEDE
PUEDE: CMP NUMERO,39H
JS ESNUM
JZ ESNUM
JNS LEER
ESNUM: MOV AL,0FEH
OUT PIC+1,AL
MOV AL,NF10
OUT PIC+4,AL
MOV CX,0
MOV BX,OFFSET NUMERO
STI
LAXO: CMP CX,1
JNZ LAXO
FIN4: INT 0
END